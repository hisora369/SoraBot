import{r as l}from"./react-router-dom-1tQCWL6Q.js";import{q as _,ca as P,R as q,j as S}from"./index-DPvthqng.js";function B(e){const a=l.useRef(null);return l.useMemo(()=>({get current(){return a.current},set current(t){a.current=t,typeof e=="function"?e(t):e&&(e.current=t)}}),[e])}var U=_({base:"flex flex-col gap-2 items-start"}),M=Symbol("default");function N(e,a){let t=l.useContext(e);if(a===null)return null;if(t&&typeof t=="object"&&"slots"in t&&t.slots){let r=new Intl.ListFormat().format(Object.keys(t.slots).map(i=>`"${i}"`));if(!a&&!t.slots[M])throw new Error(`A slot prop is required. Valid slot names are ${r}.`);let o=a||M;if(!t.slots[o])throw new Error(`Invalid slot "${a}". Valid slot names are ${r}.`);return t.slots[o]}return t}function Q(e,a,t){let r=N(t,e.slot)||{},{ref:o,...i}=r,c=B(l.useMemo(()=>P(a,o),[a,o])),s=q(i,e);return"style"in i&&i.style&&"style"in e&&e.style&&(typeof i.style=="function"||typeof e.style=="function"?s.style=u=>{let f=typeof i.style=="function"?i.style(u):i.style,d={...u.defaultStyle,...f},m=typeof e.style=="function"?e.style({...u,defaultStyle:d}):e.style;return{...d,...m}}:s.style={...i.style,...e.style}),[s,c]}const D={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},F={...D,customError:!0,valid:!1},v={isInvalid:!1,validationDetails:D,validationErrors:[]},L=l.createContext({}),C="__formValidationState"+Date.now();function J(e){if(e[C]){let{realtimeValidation:a,displayValidation:t,updateValidation:r,resetValidation:o,commitValidation:i}=e[C];return{realtimeValidation:a,displayValidation:t,updateValidation:r,resetValidation:o,commitValidation:i}}return k(e)}function k(e){let{isInvalid:a,validationState:t,name:r,value:o,builtinValidation:i,validate:c,validationBehavior:s="aria"}=e;t&&(a||(a=t==="invalid"));let u=a!==void 0?{isInvalid:a,validationErrors:[],validationDetails:F}:null,f=l.useMemo(()=>{if(!c||o==null)return null;let n=K(c,o);return j(n)},[c,o]);i!=null&&i.validationDetails.valid&&(i=void 0);let d=l.useContext(L),m=l.useMemo(()=>r?Array.isArray(r)?r.flatMap(n=>h(d[n])):h(d[r]):[],[d,r]),[R,T]=l.useState(d),[g,$]=l.useState(!1);d!==R&&(T(d),$(!1));let V=l.useMemo(()=>j(g?[]:m),[g,m]),I=l.useRef(v),[b,x]=l.useState(v),y=l.useRef(v),w=()=>{if(!O)return;E(!1);let n=f||i||I.current;p(n,y.current)||(y.current=n,x(n))},[O,E]=l.useState(!1);return l.useEffect(w),{realtimeValidation:u||V||f||i||v,displayValidation:s==="native"?u||V||b:u||V||f||i||b,updateValidation(n){s==="aria"&&!p(b,n)?x(n):I.current=n},resetValidation(){let n=v;p(n,y.current)||(y.current=n,x(n)),s==="native"&&E(!1),$(!0)},commitValidation(){s==="native"&&E(!0),$(!0)}}}function h(e){return e?Array.isArray(e)?e:[e]:[]}function K(e,a){if(typeof e=="function"){let t=e(a);if(t&&typeof t!="boolean")return h(t)}return[]}function j(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:F}:null}function p(e,a){return e===a?!0:!!e&&!!a&&e.isInvalid===a.isInvalid&&e.validationErrors.length===a.validationErrors.length&&e.validationErrors.every((t,r)=>t===a.validationErrors[r])&&Object.entries(e.validationDetails).every(([t,r])=>a.validationDetails[t]===r)}var A=l.createContext(null),W=l.forwardRef(function(a,t){[a,t]=Q(a,t,A);let{validationErrors:r,validationBehavior:o="native",children:i,className:c,...s}=a;const u=l.useMemo(()=>U({className:c}),[c]);return S.jsx("form",{noValidate:o!=="native",...s,ref:t,className:u,children:S.jsx(A.Provider,{value:{...a,validationBehavior:o},children:S.jsx(L.Provider,{value:r??{},children:i})})})});export{J as $,W as F,A as a,U as f,N as u};
