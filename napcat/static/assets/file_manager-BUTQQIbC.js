import{aU as g,bc as v,bd as C,be as D,j as h,bf as i}from"./index-DPvthqng.js";import{r as l}from"./react-router-dom-1tQCWL6Q.js";import{z as b}from"./react-hot-toast-DgcDyfs-.js";function x(n={}){let{autoFocus:e=!1,isTextInput:t,within:o}=n,r=l.useRef({isFocused:!1,isFocusVisible:e||g()}),[a,c]=l.useState(!1),[m,f]=l.useState(()=>r.current.isFocused&&r.current.isFocusVisible),d=l.useCallback(()=>f(r.current.isFocused&&r.current.isFocusVisible),[]),s=l.useCallback(u=>{r.current.isFocused=u,c(u),d()},[d]);v(u=>{r.current.isFocusVisible=u,d()},[],{isTextInput:t});let{focusProps:F}=C({isDisabled:o,onFocusChange:s}),{focusWithinProps:y}=D({isDisabled:!o,onFocusWithinChange:s});return{isFocused:a,isFocusVisible:m,focusProps:o?y:F}}function T(n){const e=l.useRef(null);return l.useImperativeHandle(n,()=>e.current),e}var M=new Set(["id","type","style","title","role","tabIndex","htmlFor","width","height","abbr","accept","acceptCharset","accessKey","action","allowFullScreen","allowTransparency","alt","async","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","challenge","charset","checked","cite","class","className","cols","colSpan","command","content","contentEditable","contextMenu","controls","coords","crossOrigin","data","dateTime","default","defer","dir","disabled","download","draggable","dropzone","encType","enterKeyHint","for","form","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","headers","hidden","high","href","hrefLang","httpEquiv","icon","inputMode","isMap","itemId","itemProp","itemRef","itemScope","itemType","kind","label","lang","list","loop","manifest","max","maxLength","media","mediaGroup","method","min","minLength","multiple","muted","name","noValidate","open","optimum","pattern","ping","placeholder","poster","preload","radioGroup","referrerPolicy","readOnly","rel","required","rows","rowSpan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","slot","sortable","span","spellCheck","src","srcDoc","srcSet","start","step","target","translate","typeMustMatch","useMap","value","wmode","wrap"]),R=new Set(["onCopy","onCut","onPaste","onLoad","onError","onWheel","onScroll","onCompositionEnd","onCompositionStart","onCompositionUpdate","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPointerDown","onPointerEnter","onPointerLeave","onPointerUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd"]),w=/^(data-.*)$/,$=/^(aria-.*)$/,p=/^(on[A-Z].*)$/;function S(n,e={}){let{labelable:t=!0,enabled:o=!0,propNames:r,omitPropNames:a,omitEventNames:c,omitDataProps:m,omitEventProps:f}=e,d={};if(!o)return n;for(const s in n)a!=null&&a.has(s)||c!=null&&c.has(s)&&p.test(s)||p.test(s)&&!R.has(s)||m&&w.test(s)||f&&p.test(s)||(Object.prototype.hasOwnProperty.call(n,s)&&(M.has(s)||t&&$.test(s)||r!=null&&r.has(s)||w.test(s))||p.test(s))&&(d[s]=n[s]);return d}var I=n=>h.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...n,children:h.jsx("path",{d:"M15.5 19l-7-7 7-7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})});function L(n){return l.forwardRef(n)}var k=(n,e,t=!0)=>{if(!e)return[n,{}];const o=e.reduce((r,a)=>a in n?{...r,[a]:n[a]}:r,{});return t?[Object.keys(n).filter(a=>!e.includes(a)).reduce((a,c)=>({...a,[c]:n[c]}),{}),o]:[n,o]};class O{static async listFiles(e="/"){const{data:t}=await i.get(`/File/list?path=${encodeURIComponent(e)}`);return t.data}static async listDirectories(e="/"){const{data:t}=await i.get(`/File/list?path=${encodeURIComponent(e)}&onlyDirectory=true`);return t.data}static async createDirectory(e){const{data:t}=await i.post("/File/mkdir",{path:e});return t.data}static async delete(e){const{data:t}=await i.post("/File/delete",{path:e});return t.data}static async readFile(e){const{data:t}=await i.get(`/File/read?path=${encodeURIComponent(e)}`);return t.data}static async writeFile(e,t){const{data:o}=await i.post("/File/write",{path:e,content:t});return o.data}static async createFile(e){const{data:t}=await i.post("/File/create",{path:e});return t.data}static async batchDelete(e){const{data:t}=await i.post("/File/batchDelete",{paths:e});return t.data}static async rename(e,t){const{data:o}=await i.post("/File/rename",{oldPath:e,newPath:t});return o.data}static async move(e,t){const{data:o}=await i.post("/File/move",{sourcePath:e,targetPath:t});return o.data}static async batchMove(e){const{data:t}=await i.post("/File/batchMove",{items:e});return t.data}static download(e){const t=`/File/download?path=${encodeURIComponent(e)}`;b.promise(i.post(t,void 0,{responseType:"blob"}).catch(o=>{throw console.error(o),new Error("下载失败")}),{loading:"正在下载文件...",success:"下载成功",error:"下载失败"}).then(o=>{const r=window.URL.createObjectURL(new Blob([o.data])),a=document.createElement("a");a.href=r;let c=e.split("/").pop()||"";e.split(".").length===1&&(c+=".zip"),a.setAttribute("download",c),document.body.appendChild(a),a.click(),document.body.removeChild(a)}).catch(o=>{console.error(o)})}static async batchDownload(e){b.promise(i.post("/File/batchDownload",{paths:e},{responseType:"blob"}).catch(o=>{throw console.error(o),new Error("下载失败")}),{loading:"正在下载文件...",success:"下载成功",error:"下载失败"}).then(o=>{const r=window.URL.createObjectURL(new Blob([o.data])),a=document.createElement("a");a.href=r,a.setAttribute("download","files.zip"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}).catch(o=>{console.error(o)})}static async downloadToURL(e){const t=`/File/download?path=${encodeURIComponent(e)}`,o=await i.post(t,void 0,{responseType:"blob"});return window.URL.createObjectURL(new Blob([o.data]))}static async upload(e,t){const o=new FormData;t.forEach(a=>{o.append("files",a)});const{data:r}=await i.post(`/File/upload?path=${encodeURIComponent(e)}`,o,{headers:{"Content-Type":"multipart/form-data"}});return r.data}static async uploadWebUIFont(e){const t=new FormData;t.append("file",e);const{data:o}=await i.post("/File/font/upload/webui",t,{headers:{"Content-Type":"multipart/form-data"}});return o.data}static async deleteWebUIFont(){const{data:e}=await i.post("/File/font/delete/webui");return e.data}}export{x as $,I as C,O as F,L as a,S as f,k as m,T as u};
