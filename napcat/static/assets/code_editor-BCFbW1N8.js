import{e as we,j as be}from"./index-DPvthqng.js";import{r as u,R as C}from"./react-router-dom-1tQCWL6Q.js";import{l as ye,m as je}from"./monaco-editor-DSSspO4w.js";function oe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function Oe(e){if(Array.isArray(e))return e}function Me(e,r,t){return(r=Le(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ee(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,o,i,s,g=[],p=!0,h=!1;try{if(i=(t=t.call(e)).next,r!==0)for(;!(p=(n=i.call(t)).done)&&(g.push(n.value),g.length!==r);p=!0);}catch(E){h=!0,o=E}finally{try{if(!p&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(h)throw o}}return g}}function Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ie(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function ae(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ie(Object(t),!0).forEach(function(n){Me(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ie(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Se(e,r){if(e==null)return{};var t,n,o=Re(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function Re(e,r){if(e==null)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.indexOf(n)!==-1)continue;t[n]=e[n]}return t}function Ce(e,r){return Oe(e)||Ee(e,r)||We(e,r)||Pe()}function Ie(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Le(e){var r=Ie(e,"string");return typeof r=="symbol"?r:r+""}function We(e,r){if(e){if(typeof e=="string")return oe(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?oe(e,r):void 0}}function $e(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ue(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function ce(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ue(Object(t),!0).forEach(function(n){$e(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Te(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){return r.reduceRight(function(o,i){return i(o)},n)}}function V(e){return function r(){for(var t=this,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return o.length>=e.length?e.apply(this,o):function(){for(var s=arguments.length,g=new Array(s),p=0;p<s;p++)g[p]=arguments[p];return r.apply(t,[].concat(o,g))}}}function K(e){return{}.toString.call(e).includes("Object")}function ke(e){return!Object.keys(e).length}function N(e){return typeof e=="function"}function Ae(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function De(e,r){return K(r)||S("changeType"),Object.keys(r).some(function(t){return!Ae(e,t)})&&S("changeField"),r}function xe(e){N(e)||S("selectorType")}function Ve(e){N(e)||K(e)||S("handlerType"),K(e)&&Object.values(e).some(function(r){return!N(r)})&&S("handlersType")}function ze(e){e||S("initialIsRequired"),K(e)||S("initialType"),ke(e)&&S("initialContent")}function Ne(e,r){throw new Error(e[r]||e.default)}var qe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},S=V(Ne)(qe),B={changes:De,selector:xe,handler:Ve,initial:ze};function Fe(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};B.initial(e),B.handler(r);var t={current:e},n=V(He)(t,r),o=V(Be)(t),i=V(B.changes)(e),s=V(Ue)(t);function g(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(E){return E};return B.selector(h),h(t.current)}function p(h){Te(n,o,i,s)(h)}return[g,p]}function Ue(e,r){return N(r)?r(e.current):r}function Be(e,r){return e.current=ce(ce({},e.current),r),r}function He(e,r,t){return N(r)?r(e.current):Object.keys(t).forEach(function(n){var o;return(o=r[n])===null||o===void 0?void 0:o.call(r,e.current[n])}),t}var Ke={create:Fe},_e={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}};function Ge(e){return function r(){for(var t=this,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return o.length>=e.length?e.apply(this,o):function(){for(var s=arguments.length,g=new Array(s),p=0;p<s;p++)g[p]=arguments[p];return r.apply(t,[].concat(o,g))}}}function Ye(e){return{}.toString.call(e).includes("Object")}function Je(e){return e||le("configIsRequired"),Ye(e)||le("configType"),e.urls?(Qe(),{paths:{vs:e.urls.monacoBase}}):e}function Qe(){console.warn(se.deprecation)}function Xe(e,r){throw new Error(e[r]||e.default)}var se={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},le=Ge(Xe)(se),Ze={config:Je},er=function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return function(o){return t.reduceRight(function(i,s){return s(i)},o)}};function fe(e,r){return Object.keys(r).forEach(function(t){r[t]instanceof Object&&e[t]&&Object.assign(r[t],fe(e[t],r[t]))}),ae(ae({},e),r)}var rr={type:"cancelation",msg:"operation is manually canceled"};function re(e){var r=!1,t=new Promise(function(n,o){e.then(function(i){return r?o(rr):n(i)}),e.catch(o)});return t.cancel=function(){return r=!0},t}var tr=["monaco"],nr=Ke.create({config:_e,isInitialized:!1,resolve:null,reject:null,monaco:null}),de=Ce(nr,2),q=de[0],_=de[1];function or(e){var r=Ze.config(e),t=r.monaco,n=Se(r,tr);_(function(o){return{config:fe(o.config,n),monaco:t}})}function ir(){var e=q(function(r){var t=r.monaco,n=r.isInitialized,o=r.resolve;return{monaco:t,isInitialized:n,resolve:o}});if(!e.isInitialized){if(_({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),re(te);if(window.monaco&&window.monaco.editor)return ge(window.monaco),e.resolve(window.monaco),re(te);er(ar,cr)(lr)}return re(te)}function ar(e){return document.body.appendChild(e)}function ur(e){var r=document.createElement("script");return e&&(r.src=e),r}function cr(e){var r=q(function(n){var o=n.config,i=n.reject;return{config:o,reject:i}}),t=ur("".concat(r.config.paths.vs,"/loader.js"));return t.onload=function(){return e()},t.onerror=r.reject,t}function lr(){var e=q(function(t){var n=t.config,o=t.resolve,i=t.reject;return{config:n,resolve:o,reject:i}}),r=window.require;r.config(e.config),r(["vs/editor/editor.main"],function(t){var n=t.m;ge(n),e.resolve(n)},function(t){e.reject(t)})}function ge(e){q().monaco||_({monaco:e})}function sr(){return q(function(e){var r=e.monaco;return r})}var te=new Promise(function(e,r){return _({resolve:e,reject:r})}),G={config:or,init:ir,__getMonacoInstance:sr},fr={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ne=fr,dr={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},gr=dr;function pr({children:e}){return C.createElement("div",{style:gr.container},e)}var mr=pr,hr=mr;function vr({width:e,height:r,isEditorReady:t,loading:n,_ref:o,className:i,wrapperProps:s}){return C.createElement("section",{style:{...ne.wrapper,width:e,height:r},...s},!t&&C.createElement(hr,null,n),C.createElement("div",{ref:o,style:{...ne.fullWidth,...!t&&ne.hide},className:i}))}var wr=vr,pe=u.memo(wr);function br(e){u.useEffect(e,[])}var me=br;function yr(e,r,t=!0){let n=u.useRef(!0);u.useEffect(n.current||!t?()=>{n.current=!1}:e,r)}var O=yr;function z(){}function $(e,r,t,n){return jr(e,n)||Or(e,r,t,n)}function jr(e,r){return e.editor.getModel(he(e,r))}function Or(e,r,t,n){return e.editor.createModel(r,t,n?he(e,n):void 0)}function he(e,r){return e.Uri.parse(r)}function Mr({original:e,modified:r,language:t,originalLanguage:n,modifiedLanguage:o,originalModelPath:i,modifiedModelPath:s,keepCurrentOriginalModel:g=!1,keepCurrentModifiedModel:p=!1,theme:h="light",loading:E="Loading...",options:M={},height:Y="100%",width:J="100%",className:Q,wrapperProps:X={},beforeMount:Z=z,onMount:ee=z}){let[y,T]=u.useState(!1),[R,v]=u.useState(!0),w=u.useRef(null),m=u.useRef(null),k=u.useRef(null),b=u.useRef(ee),l=u.useRef(Z),I=u.useRef(!1);me(()=>{let a=G.init();return a.then(f=>(m.current=f)&&v(!1)).catch(f=>(f==null?void 0:f.type)!=="cancelation"&&console.error("Monaco initialization: error:",f)),()=>w.current?A():a.cancel()}),O(()=>{if(w.current&&m.current){let a=w.current.getOriginalEditor(),f=$(m.current,e||"",n||t||"text",i||"");f!==a.getModel()&&a.setModel(f)}},[i],y),O(()=>{if(w.current&&m.current){let a=w.current.getModifiedEditor(),f=$(m.current,r||"",o||t||"text",s||"");f!==a.getModel()&&a.setModel(f)}},[s],y),O(()=>{let a=w.current.getModifiedEditor();a.getOption(m.current.editor.EditorOption.readOnly)?a.setValue(r||""):r!==a.getValue()&&(a.executeEdits("",[{range:a.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),a.pushUndoStop())},[r],y),O(()=>{var a,f;(f=(a=w.current)==null?void 0:a.getModel())==null||f.original.setValue(e||"")},[e],y),O(()=>{let{original:a,modified:f}=w.current.getModel();m.current.editor.setModelLanguage(a,n||t||"text"),m.current.editor.setModelLanguage(f,o||t||"text")},[t,n,o],y),O(()=>{var a;(a=m.current)==null||a.editor.setTheme(h)},[h],y),O(()=>{var a;(a=w.current)==null||a.updateOptions(M)},[M],y);let F=u.useCallback(()=>{var P;if(!m.current)return;l.current(m.current);let a=$(m.current,e||"",n||t||"text",i||""),f=$(m.current,r||"",o||t||"text",s||"");(P=w.current)==null||P.setModel({original:a,modified:f})},[t,r,o,e,n,i,s]),U=u.useCallback(()=>{var a;!I.current&&k.current&&(w.current=m.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...M}),F(),(a=m.current)==null||a.editor.setTheme(h),T(!0),I.current=!0)},[M,h,F]);u.useEffect(()=>{y&&b.current(w.current,m.current)},[y]),u.useEffect(()=>{!R&&!y&&U()},[R,y,U]);function A(){var f,P,L,D;let a=(f=w.current)==null?void 0:f.getModel();g||((P=a==null?void 0:a.original)==null||P.dispose()),p||((L=a==null?void 0:a.modified)==null||L.dispose()),(D=w.current)==null||D.dispose()}return C.createElement(pe,{width:J,height:Y,isEditorReady:y,loading:E,_ref:k,className:Q,wrapperProps:X})}var Er=Mr;u.memo(Er);function Pr(e){let r=u.useRef();return u.useEffect(()=>{r.current=e},[e]),r.current}var Sr=Pr,H=new Map;function Rr({defaultValue:e,defaultLanguage:r,defaultPath:t,value:n,language:o,path:i,theme:s="light",line:g,loading:p="Loading...",options:h={},overrideServices:E={},saveViewState:M=!0,keepCurrentModel:Y=!1,width:J="100%",height:Q="100%",className:X,wrapperProps:Z={},beforeMount:ee=z,onMount:y=z,onChange:T,onValidate:R=z}){let[v,w]=u.useState(!1),[m,k]=u.useState(!0),b=u.useRef(null),l=u.useRef(null),I=u.useRef(null),F=u.useRef(y),U=u.useRef(ee),A=u.useRef(),a=u.useRef(n),f=Sr(i),P=u.useRef(!1),L=u.useRef(!1);me(()=>{let c=G.init();return c.then(d=>(b.current=d)&&k(!1)).catch(d=>(d==null?void 0:d.type)!=="cancelation"&&console.error("Monaco initialization: error:",d)),()=>l.current?ve():c.cancel()}),O(()=>{var d,j,x,W;let c=$(b.current,e||n||"",r||o||"",i||t||"");c!==((d=l.current)==null?void 0:d.getModel())&&(M&&H.set(f,(j=l.current)==null?void 0:j.saveViewState()),(x=l.current)==null||x.setModel(c),M&&((W=l.current)==null||W.restoreViewState(H.get(i))))},[i],v),O(()=>{var c;(c=l.current)==null||c.updateOptions(h)},[h],v),O(()=>{!l.current||n===void 0||(l.current.getOption(b.current.editor.EditorOption.readOnly)?l.current.setValue(n):n!==l.current.getValue()&&(L.current=!0,l.current.executeEdits("",[{range:l.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),l.current.pushUndoStop(),L.current=!1))},[n],v),O(()=>{var d,j;let c=(d=l.current)==null?void 0:d.getModel();c&&o&&((j=b.current)==null||j.editor.setModelLanguage(c,o))},[o],v),O(()=>{var c;g!==void 0&&((c=l.current)==null||c.revealLine(g))},[g],v),O(()=>{var c;(c=b.current)==null||c.editor.setTheme(s)},[s],v);let D=u.useCallback(()=>{var c;if(!(!I.current||!b.current)&&!P.current){U.current(b.current);let d=i||t,j=$(b.current,n||e||"",r||o||"",d||"");l.current=(c=b.current)==null?void 0:c.editor.create(I.current,{model:j,automaticLayout:!0,...h},E),M&&l.current.restoreViewState(H.get(d)),b.current.editor.setTheme(s),g!==void 0&&l.current.revealLine(g),w(!0),P.current=!0}},[e,r,t,n,o,i,h,E,M,s,g]);u.useEffect(()=>{v&&F.current(l.current,b.current)},[v]),u.useEffect(()=>{!m&&!v&&D()},[m,v,D]),a.current=n,u.useEffect(()=>{var c,d;v&&T&&((c=A.current)==null||c.dispose(),A.current=(d=l.current)==null?void 0:d.onDidChangeModelContent(j=>{L.current||T(l.current.getValue(),j)}))},[v,T]),u.useEffect(()=>{if(v){let c=b.current.editor.onDidChangeMarkers(d=>{var x;let j=(x=l.current.getModel())==null?void 0:x.uri;if(j&&d.find(W=>W.path===j.path)){let W=b.current.editor.getModelMarkers({resource:j});R==null||R(W)}});return()=>{c==null||c.dispose()}}return()=>{}},[v,R]);function ve(){var c,d;(c=A.current)==null||c.dispose(),Y?M&&H.set(i,l.current.saveViewState()):(d=l.current.getModel())==null||d.dispose(),l.current.dispose()}return C.createElement(pe,{width:J,height:Q,isEditorReady:v,loading:p,_ref:I,className:X,wrapperProps:Z})}var Cr=Rr,Ir=u.memo(Cr),Lr=Ir;function Wr(e){return new Worker("/webui/assets/editor.worker-BCzxt1at.js",{name:e==null?void 0:e.name})}function $r(e){return new Worker("/webui/assets/css.worker-DaIe3gwK.js",{name:e==null?void 0:e.name})}function Tr(e){return new Worker("/webui/assets/html.worker-CKrFyw_2.js",{name:e==null?void 0:e.name})}function kr(e){return new Worker("/webui/assets/json.worker-B7c_PmGb.js",{name:e==null?void 0:e.name})}function Ar(e){return new Worker("/webui/assets/ts.worker-BhkL8olL.js",{name:e==null?void 0:e.name})}self.MonacoEnvironment={getWorker(e,r){return r==="json"?new kr:r==="css"||r==="scss"||r==="less"?new $r:r==="html"||r==="handlebars"||r==="razor"?new Tr:r==="typescript"||r==="javascript"?new Ar:new Wr}};ye.typescript.typescriptDefaults.setEagerModelSync(!0);G.config({monaco:je,paths:{vs:"/webui/monaco-editor/min/vs"}});G.config({"vs/nls":{availableLanguages:{"*":"zh-cn"}}});const zr=C.forwardRef((e,r)=>{const{isDark:t}=we(),n=(o,i)=>{r&&(typeof r=="function"?r(o):r.current=o),e.onMount&&e.onMount(o,i)};return be.jsx(Lr,{...e,onMount:n,theme:t?"vs-dark":"light"})});export{zr as C};
